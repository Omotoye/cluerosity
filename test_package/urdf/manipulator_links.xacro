<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro">

    <!-- 
        +===========================+
        |      Fixed Link Macro     |
        +==========================+ 
    -->

    <xacro:macro name="fixed_link" params="name link_xyz link_rpy joint_xyz joint_rpy mesh_name collision_xyz collision_rpy collision_size mass ixx ixy ixz iyy iyz izz parent">
        <link name="${name}">
            <xacro:mesh_link 
                xyz="${link_xyz}" rpy="${link_rpy}" 
                mesh_name="${mesh_name}"/>
            <xacro:box_collision 
                xyz="${collision_xyz}" rpy="${collision_rpy}"  
                box_size="${collision_size}"/>
            <xacro:link_inertia 
                xyz="${collision_xyz}" rpy="${collision_rpy}"  
                mass="${mass}" 
                ixx="${ixx}" ixy="${ixy}" ixz="${ixz}"  
                iyy="${iyy}" iyz="${iyz}" izz="${izz}"/>
        </link>

        <joint name="${name}_joint" type="fixed">
            <parent link="${parent}" />
            <child link="${name}" />
            <origin xyz="${joint_xyz}" rpy="${joint_rpy}" />
        </joint>
    </xacro:macro>


    <!-- 
        +===========================+
        |   Continuous Link Macro    |
        +==========================+ 
    -->

    <xacro:macro name="continuous_link" params="name link_xyz link_rpy joint_xyz joint_rpy mesh_name collision_xyz collision_rpy collision_size mass ixx ixy ixz iyy iyz izz parent axis_xyz axis_rpy">
        <link name="${name}">
            <xacro:mesh_link 
                xyz="${link_xyz}" rpy="${link_rpy}" 
                mesh_name="${mesh_name}"/>
            <xacro:box_collision 
                xyz="${collision_xyz}" rpy="${collision_rpy}"  
                box_size="${collision_size}"/>
            <xacro:link_inertia 
                xyz="${collision_xyz}" rpy="${collision_rpy}"  
                mass="${mass}" 
                ixx="${ixx}" ixy="${ixy}" ixz="${ixz}"  
                iyy="${iyy}" iyz="${iyz}" izz="${izz}"/>
        </link>

        <joint name="${name}_joint" type="continuous">
            <parent link="${parent}" />
            <child link="${name}" />
            <origin xyz="${joint_xyz}" rpy="${joint_rpy}" />
            <axis xyz="${axis_xyz}" rpy="${axis_rpy}" />
        </joint>
    </xacro:macro>

    <!-- 
        +===========================+
        |  Revolute Link Macro    |
        +==========================+ 
    -->

    <xacro:macro name="revolute_link" params="name link_xyz link_rpy joint_xyz joint_rpy mesh_name collision_xyz collision_rpy collision_size mass ixx ixy ixz iyy iyz izz parent axis_xyz axis_rpy lower upper">
        <link name="${name}">
            <xacro:mesh_link 
                xyz="${link_xyz}" rpy="${link_rpy}" 
                mesh_name="${mesh_name}"/>
            <xacro:box_collision 
                xyz="${collision_xyz}" rpy="${collision_rpy}"  
                box_size="${collision_size}"/>
            <xacro:link_inertia 
                xyz="${collision_xyz}" rpy="${collision_rpy}"  
                mass="${mass}" 
                ixx="${ixx}" ixy="${ixy}" ixz="${ixz}"  
                iyy="${iyy}" iyz="${iyz}" izz="${izz}"/>
        </link>

        <joint name="${name}_joint" type="revolute">
            <parent link="${parent}" />
            <child link="${name}" />
            <origin xyz="${joint_xyz}" rpy="${joint_rpy}" />
            <axis xyz="${axis_xyz}" rpy="${axis_rpy}" />
            <limit effort="1000.0" lower="${lower}" upper="${upper}" velocity="0.5" /> -->
        </joint>
    </xacro:macro>

    
    <!-- 
        +==============================================+
        |      Base Link and Base footprint Macro      |
        +==============================================+ 
    -->

    <xacro:macro name="base_link" params="mesh_name">
        <link name="base_link">
            <xacro:mesh_link 
                xyz="0 0 0.15" rpy="0 ${PI} ${-PI/2}" 
                mesh_name="${mesh_name}"/>
            <xacro:box_collision 
                xyz="0 0 0.075" rpy="0 0 0"  
                box_size="0.8 0.4 0.15"/>
            <xacro:box_collision 
                xyz="-0.325 0.14 0.2" rpy="0 0 0"  
                box_size="0.15 0.12 0.1"/>
            <xacro:box_collision 
                xyz="0.45 0.1 0.05" rpy="0 0 0"  
                box_size="0.1 0.1 0.05"/>
            <xacro:link_inertia 
                xyz="0 0 0.075" rpy="0 0 0"  
                mass="56.77662104" 
                ixx="2.64" ixy="0.221" ixz="0.046"  
                iyy="0.907" iyz="-0.237"  izz="3.303"/>
        </link>

        <!-- Base footprint is on the ground under the robot -->
        <link name="base_footprint" />

        <joint name="base_link_joint" type="fixed">
            <origin xyz="0 0 0.115" rpy="0 0 0" />
            <parent link="base_footprint" />
            <child link="base_link" />
        </joint>
    </xacro:macro>




    <xacro:macro name="motor_link" params="name joint_xyz joint_rpy parent axis_xyz axis_rpy lower upper">
        <link name="${name}">
            <xacro:mesh_link 
                xyz="0 0 0" rpy="0 0 0" 
                mesh_name="${motor}"/>
            <xacro:box_collision 
                xyz="0 0 0" rpy="0 0 0"  
                box_size="0.065 0.065 0.1"/>
            <xacro:link_inertia 
                xyz="0 0 0" rpy="0 0 0"  
                mass="0.33104028" 
                ixx="0.00022976" ixy="0" ixz="0" 
                iyy="0.00022976" iyz="0" izz="0.00011672"/>
        </link>

        <joint name="${name}_joint" type="revolute">
            <parent link="${parent}" />
            <child link="${name}" />
            <origin xyz="${joint_xyz}" rpy="${joint_rpy}" />
            <axis xyz="${axis_xyz}" rpy="${axis_rpy}" />
            <limit effort="10000.0" lower="${lower}" upper="${upper}" velocity="0.5" /> -->
        </joint>
    </xacro:macro>

</robot>
